{"remainingRequest":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/babel-loader/lib/index.js!/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/login.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/login.vue","mtime":1771340637882},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/babel.config.js","mtime":1739263804000},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/babel-loader/lib/index.js","mtime":1771254462371},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js","mtime":1771254462450}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvciBmcm9tICIvVXNlcnMvbGl1Y2hlbmdoYW4vRGVza3RvcC9sYWItc2FmZXR5LXN5c3RlbS9mcm9udC9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3IuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2xpdWNoZW5naGFuL0Rlc2t0b3AvbGFiLXNhZmV0eS1zeXN0ZW0vZnJvbnQvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCBodHRwIGZyb20gIkAvdXRpbHMvaHR0cCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpei0puWPtyIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIF90aGlzLmRvTG9naW4oKS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICAgIH0pOwogICAgfSwKICAgIGRvTG9naW46IGZ1bmN0aW9uIGRvTG9naW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvcigpLm0oZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzLCBib2R5LCB0b2tlbiwgX2UkcmVzcG9uc2UsIF9lJHJlc3BvbnNlMiwgbXNnLCBfdDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yKCkudyhmdW5jdGlvbiAoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnAgPSBfY29udGV4dC5uKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIV90aGlzMi5sb2FkaW5nKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uID0gMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYSgyKTsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dC5wID0gMjsKICAgICAgICAgICAgICBfY29udGV4dC5uID0gMzsKICAgICAgICAgICAgICByZXR1cm4gaHR0cCh7CiAgICAgICAgICAgICAgICB1cmw6ICIvYXBpL2F1dGgvbG9naW4iLAogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpczIuZm9ybS51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzMi5mb3JtLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC52OwogICAgICAgICAgICAgIGJvZHkgPSByZXMgJiYgcmVzLmRhdGEgIT09IHVuZGVmaW5lZCA/IHJlcy5kYXRhIDogcmVzOwogICAgICAgICAgICAgIHRva2VuID0gIiI7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgICAgdG9rZW4gPSBib2R5OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b2tlbiA9IGJvZHkgJiYgYm9keS50b2tlbiB8fCBib2R5ICYmIGJvZHkuYWNjZXNzVG9rZW4gfHwgYm9keSAmJiBib2R5Lmp3dCB8fCBib2R5ICYmIGJvZHkuZGF0YSAmJiBib2R5LmRhdGEudG9rZW4gfHwgYm9keSAmJiBib2R5LmRhdGEgJiYgYm9keS5kYXRhLmFjY2Vzc1Rva2VuIHx8ICIiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm4gPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcigi55m75b2V5oiQ5Yqf5L2G5pyq6I635Y+W5YiwVG9rZW7vvIzor7fmo4Dmn6XlkI7nq6/ov5Tlm57lrZfmrrUiKTsKICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJsb2dpbiByZXNwb25zZToiLCBib2R5KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYSgyKTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJUb2tlbiIsIHRva2VuKTsKICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygi55m75b2V5oiQ5YqfIik7CiAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICBwYXRoOiAiLyIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dC5uID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF9jb250ZXh0LnAgPSA1OwogICAgICAgICAgICAgIF90ID0gX2NvbnRleHQudjsKICAgICAgICAgICAgICBtc2cgPSAoX3QgPT09IG51bGwgfHwgX3QgPT09IHZvaWQgMCB8fCAoX2UkcmVzcG9uc2UgPSBfdC5yZXNwb25zZSkgPT09IG51bGwgfHwgX2UkcmVzcG9uc2UgPT09IHZvaWQgMCB8fCAoX2UkcmVzcG9uc2UgPSBfZSRyZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZSRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UkcmVzcG9uc2UubWVzc2FnZSkgfHwgKF90ID09PSBudWxsIHx8IF90ID09PSB2b2lkIDAgfHwgKF9lJHJlc3BvbnNlMiA9IF90LnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZSRyZXNwb25zZTIgPT09IHZvaWQgMCB8fCAoX2UkcmVzcG9uc2UyID0gX2UkcmVzcG9uc2UyLmRhdGEpID09PSBudWxsIHx8IF9lJHJlc3BvbnNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UkcmVzcG9uc2UyLm1zZykgfHwgKF90ID09PSBudWxsIHx8IF90ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdC5tZXNzYWdlKSB8fCAi55m75b2V5aSx6LSlIjsKICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IobXNnKTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0LnAgPSA2OwogICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmYoNik7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYSgyKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDUsIDYsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdvUmVnaXN0ZXI6IGZ1bmN0aW9uIGdvUmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL3JlZ2lzdGVyIgogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["http","name","data","loading","form","username","password","rules","required","message","trigger","methods","onSubmit","_this","$refs","validate","valid","doLogin","catch","_this2","_asyncToGenerator","_regenerator","m","_callee","res","body","token","_e$response","_e$response2","msg","_t","w","_context","p","n","a","url","method","v","undefined","accessToken","jwt","$message","error","console","log","localStorage","setItem","success","$router","replace","path","response","f","goRegister","push"],"sources":["src/views/login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-page\">\r\n    <div class=\"login-card\">\r\n      <div class=\"title\">智能高校实验室安全管理系统</div>\r\n\r\n      <el-form\r\n          ref=\"form\"\r\n          :model=\"form\"\r\n          :rules=\"rules\"\r\n          label-width=\"70px\"\r\n          @keyup.enter.native=\"onSubmit\"\r\n      >\r\n        <el-form-item label=\"账号\" prop=\"username\">\r\n          <el-input\r\n              v-model.trim=\"form.username\"\r\n              placeholder=\"请输入账号\"\r\n              autocomplete=\"username\"\r\n              clearable\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input\r\n              v-model.trim=\"form.password\"\r\n              placeholder=\"请输入密码\"\r\n              autocomplete=\"current-password\"\r\n              show-password\r\n              clearable\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button\r\n              type=\"primary\"\r\n              class=\"login-btn\"\r\n              :loading=\"loading\"\r\n              @click=\"onSubmit\"\r\n          >\r\n            登录\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div class=\"footer\">\r\n        <el-link type=\"primary\" :underline=\"false\" @click=\"goRegister\">\r\n          注册账号\r\n        </el-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport http from \"@/utils/http\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      form: {\r\n        username: \"\",\r\n        password: \"\"\r\n      },\r\n      rules: {\r\n        username: [{ required: true, message: \"请输入账号\", trigger: \"blur\" }],\r\n        password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (!valid) return;\r\n        this.doLogin().catch(() => {});\r\n      });\r\n    },\r\n\r\n    async doLogin() {\r\n      if (this.loading) return;\r\n      this.loading = true;\r\n\r\n      try {\r\n        const res = await http({\r\n          url: \"/api/auth/login\",\r\n          method: \"POST\",\r\n          data: {\r\n            username: this.form.username,\r\n            password: this.form.password\r\n          }\r\n        });\r\n\r\n        const body = res && res.data !== undefined ? res.data : res;\r\n        let token = \"\";\r\n\r\n        if (typeof body === \"string\") {\r\n          token = body;\r\n        } else {\r\n          token =\r\n              (body && body.token) ||\r\n              (body && body.accessToken) ||\r\n              (body && body.jwt) ||\r\n              (body && body.data && body.data.token) ||\r\n              (body && body.data && body.data.accessToken) ||\r\n              \"\";\r\n        }\r\n\r\n        if (!token) {\r\n          this.$message.error(\"登录成功但未获取到Token，请检查后端返回字段\");\r\n          // eslint-disable-next-line no-console\r\n          console.log(\"login response:\", body);\r\n          return;\r\n        }\r\n\r\n        localStorage.setItem(\"Token\", token);\r\n        this.$message.success(\"登录成功\");\r\n        this.$router.replace({ path: \"/\" });\r\n      } catch (e) {\r\n        const msg =\r\n            e?.response?.data?.message ||\r\n            e?.response?.data?.msg ||\r\n            e?.message ||\r\n            \"登录失败\";\r\n        this.$message.error(msg);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    goRegister() {\r\n      this.$router.push({ path: \"/register\" });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-page {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  padding-top: 80px;\r\n  background: #ffffff;\r\n}\r\n\r\n.login-card {\r\n  width: 760px;\r\n  padding: 48px 60px 32px;\r\n  border-radius: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.title {\r\n  text-align: center;\r\n  font-size: 34px;\r\n  font-weight: 700;\r\n  color: #1677ff;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.login-btn {\r\n  width: 100%;\r\n  height: 56px;\r\n  font-size: 22px;\r\n  font-weight: 700;\r\n}\r\n\r\n.footer {\r\n  margin-top: 20px;\r\n  text-align: left;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}