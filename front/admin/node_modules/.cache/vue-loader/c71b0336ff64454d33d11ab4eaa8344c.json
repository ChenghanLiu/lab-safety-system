{"remainingRequest":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/modules/equipment/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/modules/equipment/list.vue","mtime":1771499164561},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/babel-loader/lib/index.js","mtime":1771254462371},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js","mtime":1771254462450}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7CiAgbGlzdEVxdWlwbWVudCwKICBjcmVhdGVFcXVpcG1lbnQsCiAgdXBkYXRlRXF1aXBtZW50LAogIGRlbGV0ZUVxdWlwbWVudAp9IGZyb20gIkAvYXBpL2VxdWlwbWVudCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAoKICAgICAgcm93czogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBwYWdlOiAxLAogICAgICBzaXplOiAxMCwKCiAgICAgIGZpbHRlcnM6IHsKICAgICAgICBjYXRlZ29yeTogIiIsCiAgICAgICAga2V5d29yZDogIiIKICAgICAgfSwKCiAgICAgIC8vIOaWsOWinuS9oOimgeeahOexu+WIq++8muWunumqjOWupOWZqOadkAogICAgICBjYXRlZ29yeU9wdGlvbnM6IFsKICAgICAgICAi5pi+5b6u6ZWcIiwKICAgICAgICAi546755KD5Zmo55q/IiwKICAgICAgICAi5a6J5YWo5Zmo5p2QIiwKICAgICAgICAi5YyW5a2m6K+V5YmCIiwKICAgICAgICAi55S15a2Q6K6+5aSHIiwKICAgICAgICAi5a6e6aqM5a6k5Zmo5p2QIiwKICAgICAgICAi5YW25LuWIgogICAgICBdLAoKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ1RpdGxlOiAiIiwKICAgICAgaXNFZGl0OiBmYWxzZSwKICAgICAgZWRpdElkOiBudWxsLAoKICAgICAgZm9ybTogewogICAgICAgIGxhYklkOiAiIiwKICAgICAgICBjYXRlZ29yeTogIiIsCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgbW9kZWw6ICIiLAogICAgICAgIHNwZWNpZmljYXRpb246ICIiLAogICAgICAgIHF1YW50aXR5OiAiIiwKICAgICAgICBwdXJjaGFzZURhdGU6ICIiLAogICAgICAgIHN0b3JhZ2VMb2NhdGlvbjogIiIsCiAgICAgICAgc3RhdHVzOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIKICAgICAgfQogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgcm9sZSgpIHsKICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJSb2xlIikgfHwgIiI7CiAgICB9LAogICAgaXNBZG1pbigpIHsKICAgICAgcmV0dXJuIHRoaXMucm9sZSA9PT0gIkFETUlOIjsKICAgIH0sCgogICAgLy8g5YmN56uv5YWc5bqV6L+H5ruk77yI5ZCO56uv5LiN5pSv5oyBIGtleXdvcmQvY2F0ZWdvcnkg5Lmf6IO95Zyo5b2T5YmN6aG1562b77yJCiAgICBkaXNwbGF5Um93cygpIHsKICAgICAgY29uc3QgY2F0ID0gKHRoaXMuZmlsdGVycy5jYXRlZ29yeSB8fCAiIikudHJpbSgpOwogICAgICBjb25zdCBrdyA9ICh0aGlzLmZpbHRlcnMua2V5d29yZCB8fCAiIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7CgogICAgICByZXR1cm4gKHRoaXMucm93cyB8fCBbXSkuZmlsdGVyKHIgPT4gewogICAgICAgIGNvbnN0IG9rQ2F0ID0gIWNhdCB8fCBTdHJpbmcoci5jYXRlZ29yeSB8fCAiIikgPT09IGNhdDsKICAgICAgICBpZiAoIWt3KSByZXR1cm4gb2tDYXQ7CgogICAgICAgIGNvbnN0IGhheSA9IFsKICAgICAgICAgIHIubmFtZSwKICAgICAgICAgIHIubW9kZWwsCiAgICAgICAgICByLnNwZWNpZmljYXRpb24sCiAgICAgICAgICByLmRlc2NyaXB0aW9uLAogICAgICAgICAgci5sYWJOYW1lLAogICAgICAgICAgci5jYXRlZ29yeQogICAgICAgIF0ubWFwKHggPT4gU3RyaW5nKHggfHwgIiIpLnRvTG93ZXJDYXNlKCkpLmpvaW4oIiAiKTsKCiAgICAgICAgcmV0dXJuIG9rQ2F0ICYmIGhheS5pbmNsdWRlcyhrdyk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWQoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyDlm77niYfpnZnmgIHmmKDlsITvvIjkuI3mlLnlkI7nq6/vvIkKICAgIC8vIOWbvueJh+aUvuWcqO+8mnB1YmxpYy9lcXVpcG1lbnQvIOS4iwogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgX2ltZyhmaWxlTmFtZSkgewogICAgICAvLyDlpITnkIbkuK3mlofmlofku7blkI3ot6/lvoQKICAgICAgcmV0dXJuIGVuY29kZVVSSShgL2VxdWlwbWVudC8ke2ZpbGVOYW1lfWApOwogICAgfSwKICAgIGdldEVxdWlwbWVudEltYWdlKHJvdykgewogICAgICBjb25zdCBjYXRlZ29yeSA9IFN0cmluZyhyb3c/LmNhdGVnb3J5IHx8ICIiKS50cmltKCk7CiAgICAgIGNvbnN0IG5hbWUgPSBTdHJpbmcocm93Py5uYW1lIHx8ICIiKS50cmltKCk7CgogICAgICAvLyAxKSDlhYjmjInlkI3np7DlhbPplK7lrZfvvIjmm7Tnsr7lh4bvvIkKICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoIueUteWtkOaYvuW+rumVnCIpKSByZXR1cm4gdGhpcy5faW1nKCLnlLXlrZDmmL7lvq7plZwucG5nIik7CiAgICAgIGlmIChuYW1lLmluY2x1ZGVzKCLlhYnlrabmmL7lvq7plZwiKSB8fCBuYW1lLmluY2x1ZGVzKCLmmL7lvq7plZwiKSkgcmV0dXJuIHRoaXMuX2ltZygi5YWJ5a2m5pi+5b6u6ZWcLnBuZyIpOwogICAgICBpZiAobmFtZS5pbmNsdWRlcygi54Gt54Gr5ZmoIikpIHJldHVybiB0aGlzLl9pbWcoIuS6jOawp+WMlueis+eBreeBq+WZqC5wbmciKTsKICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoIueDp+adryIpKSByZXR1cm4gdGhpcy5faW1nKCIyNTBtbOeDp+adry5wbmciKTsKICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoIuawouWMlumSoCIpKSByZXR1cm4gdGhpcy5faW1nKCLmsKLljJbpkqAucG5nIik7CgogICAgICAvLyAyKSDlho3mjInnsbvliKvvvIjlhZzlupXvvIkKICAgICAgY29uc3QgbWFwID0gewogICAgICAgICLmmL7lvq7plZwiOiAi5YWJ5a2m5pi+5b6u6ZWcLnBuZyIsCiAgICAgICAgIueUteWtkOiuvuWkhyI6ICLnlLXlrZDmmL7lvq7plZwucG5nIiwKICAgICAgICAi546755KD5Zmo55q/IjogIjI1MG1s54On5p2vLnBuZyIsCiAgICAgICAgIuWuieWFqOWZqOadkCI6ICLkuozmsKfljJbnorPnga3ngavlmagucG5nIiwKICAgICAgICAi5YyW5a2m6K+V5YmCIjogIuawr+WMlumSoC5wbmciLAogICAgICAgICLlrp7pqozlrqTlmajmnZAiOiAiMjUwbWzng6fmna8ucG5nIgogICAgICB9OwoKICAgICAgaWYgKG1hcFtjYXRlZ29yeV0pIHJldHVybiB0aGlzLl9pbWcobWFwW2NhdGVnb3J5XSk7CgogICAgICAvLyAzKSDmnIDlkI7lhZzlupXvvJrnlKjlt7LmnInnmoTkuIDlvKDlm77lvZPpu5jorqTvvIjkvaDlvZPliY3nm67lvZXmsqHmnIkgZGVmYXVsdC5wbmfvvIkKICAgICAgcmV0dXJuIHRoaXMuX2ltZygiMjUwbWzng6fmna8ucG5nIik7CiAgICB9LAoKICAgIGFzeW5jIGxvYWQoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CgogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgcGFnZTogdGhpcy5wYWdlIC0gMSwKICAgICAgICBzaXplOiB0aGlzLnNpemUKICAgICAgfTsKCiAgICAgIC8vIOWmguaenOWQjuerr+acquadpeaUr+aMgSBjYXRlZ29yeS9rZXl3b3Jk77yM6L+Z6YeM5Lya6Ieq5Yqo55Sf5pWI77yb5LiN5pSv5oyB5Lmf5LiN5Lya5b2x5ZONCiAgICAgIGlmICh0aGlzLmZpbHRlcnMuY2F0ZWdvcnkpIHBhcmFtcy5jYXRlZ29yeSA9IHRoaXMuZmlsdGVycy5jYXRlZ29yeTsKICAgICAgaWYgKHRoaXMuZmlsdGVycy5rZXl3b3JkKSBwYXJhbXMua2V5d29yZCA9IHRoaXMuZmlsdGVycy5rZXl3b3JkOwoKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBsaXN0RXF1aXBtZW50KHBhcmFtcyk7CiAgICAgICAgY29uc3QgZGF0YSA9IHJlcyAmJiByZXMuZGF0YSA/IHJlcy5kYXRhIDoge307CgogICAgICAgIHRoaXMucm93cyA9IGRhdGEuY29udGVudCB8fCBbXTsKICAgICAgICB0aGlzLnRvdGFsID0gTnVtYmVyKGRhdGEudG90YWxFbGVtZW50cyB8fCAwKTsKCiAgICAgICAgLy8g5Yqo5oCB6KGl5YWo57G75Yir77yI5L2g5pyq5p2l5omp5bqT5LiN55So5pS55YmN56uv77yJCiAgICAgICAgY29uc3Qgc2V0ID0gbmV3IFNldCh0aGlzLmNhdGVnb3J5T3B0aW9ucyk7CiAgICAgICAgKHRoaXMucm93cyB8fCBbXSkuZm9yRWFjaChyID0+IHsKICAgICAgICAgIGlmIChyICYmIHIuY2F0ZWdvcnkpIHNldC5hZGQoU3RyaW5nKHIuY2F0ZWdvcnkpKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNhdGVnb3J5T3B0aW9ucyA9IEFycmF5LmZyb20oc2V0KTsKCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zdCBtc2cgPSBlPy5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlPy5tZXNzYWdlIHx8ICLliqDovb3lpLHotKUiOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuiuvuWkh+WIl+ihqOWKoOi9veWksei0pe+8miIgKyBtc2cpOwogICAgICAgIHRoaXMucm93cyA9IFtdOwogICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIG9uU2VhcmNoKCkgewogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgb25SZXNldCgpIHsKICAgICAgdGhpcy5maWx0ZXJzLmNhdGVnb3J5ID0gIiI7CiAgICAgIHRoaXMuZmlsdGVycy5rZXl3b3JkID0gIiI7CiAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKCiAgICBvblBhZ2VDaGFuZ2UocCkgewogICAgICB0aGlzLnBhZ2UgPSBwOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgb25TaXplQ2hhbmdlKHMpIHsKICAgICAgdGhpcy5zaXplID0gczsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIG9wZW5DcmVhdGUoKSB7CiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAi5paw5aKe6K6+5aSHIjsKICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTsKICAgICAgdGhpcy5lZGl0SWQgPSBudWxsOwogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgbGFiSWQ6ICIiLAogICAgICAgIGNhdGVnb3J5OiAiIiwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBtb2RlbDogIiIsCiAgICAgICAgc3BlY2lmaWNhdGlvbjogIiIsCiAgICAgICAgcXVhbnRpdHk6ICIiLAogICAgICAgIHB1cmNoYXNlRGF0ZTogIiIsCiAgICAgICAgc3RvcmFnZUxvY2F0aW9uOiAiIiwKICAgICAgICBzdGF0dXM6ICIiLAogICAgICAgIGRlc2NyaXB0aW9uOiAiIgogICAgICB9OwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGZvcm1hdFN0YXR1cyhzdGF0dXMpIHsKICAgICAgY29uc3QgbWFwID0gewogICAgICAgIEFWQUlMQUJMRTogIuWPr+eUqCIsCiAgICAgICAgVU5BVkFJTEFCTEU6ICLkuI3lj6/nlKgiLAogICAgICAgIElOX1VTRTogIuS9v+eUqOS4rSIsCiAgICAgICAgTUFJTlRFTkFOQ0U6ICLnu7TmiqTkuK0iCiAgICAgIH07CiAgICAgIHJldHVybiBtYXBbc3RhdHVzXSB8fCBzdGF0dXM7CiAgICB9LAoKCiAgICBvcGVuRWRpdChyb3cpIHsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLnvJbovpHorr7lpIciOwogICAgICB0aGlzLmlzRWRpdCA9IHRydWU7CiAgICAgIHRoaXMuZWRpdElkID0gcm93LmlkOwogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgbGFiSWQ6IHJvdy5sYWJJZCwKICAgICAgICBjYXRlZ29yeTogcm93LmNhdGVnb3J5LAogICAgICAgIG5hbWU6IHJvdy5uYW1lLAogICAgICAgIG1vZGVsOiByb3cubW9kZWwsCiAgICAgICAgc3BlY2lmaWNhdGlvbjogcm93LnNwZWNpZmljYXRpb24sCiAgICAgICAgcXVhbnRpdHk6IHJvdy5xdWFudGl0eSwKICAgICAgICBwdXJjaGFzZURhdGU6IHJvdy5wdXJjaGFzZURhdGUsCiAgICAgICAgc3RvcmFnZUxvY2F0aW9uOiByb3cuc3RvcmFnZUxvY2F0aW9uLAogICAgICAgIHN0YXR1czogcm93LnN0YXR1cywKICAgICAgICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uCiAgICAgIH07CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIGFzeW5jIHN1Ym1pdCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAodGhpcy5pc0VkaXQpIHsKICAgICAgICAgIGF3YWl0IHVwZGF0ZUVxdWlwbWVudCh0aGlzLmVkaXRJZCwgdGhpcy5mb3JtKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5pu05paw5oiQ5YqfIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IGNyZWF0ZUVxdWlwbWVudCh0aGlzLmZvcm0pOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliJvlu7rmiJDlip8iKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIHRoaXMubG9hZCgpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc3QgbXNnID0gZT8ucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgfHwgZT8ubWVzc2FnZSB8fCAi5pON5L2c5aSx6LSlIjsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKG1zZyk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgcmVtb3ZlKGlkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgdGhpcy4kY29uZmlybSgi56Gu5a6a5Yig6Zmk6K+l6K6+5aSH77yfIiwgIuaPkOekuiIsIHsgdHlwZTogIndhcm5pbmciIH0pOwogICAgICAgIGF3YWl0IGRlbGV0ZUVxdWlwbWVudChpZCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGlmIChlID09PSAiY2FuY2VsIikgcmV0dXJuOwogICAgICAgIGNvbnN0IG1zZyA9IGU/LnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8IGU/Lm1lc3NhZ2UgfHwgIuWIoOmZpOWksei0pSI7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihtc2cpOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AAiLA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/modules/equipment","sourcesContent":["<template>\n  <div>\n    <el-card>\n\n      <!-- 筛选栏 -->\n      <div style=\"margin-bottom:16px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;\">\n        <el-select\n            v-model=\"filters.category\"\n            placeholder=\"类别\"\n            clearable\n            style=\"width: 200px;\"\n            @change=\"onSearch\"\n        >\n          <el-option\n              v-for=\"c in categoryOptions\"\n              :key=\"c\"\n              :label=\"c\"\n              :value=\"c\"\n          />\n        </el-select>\n\n        <el-input\n            v-model=\"filters.keyword\"\n            placeholder=\"关键字（名称/型号/规格/描述）\"\n            clearable\n            style=\"width: 280px;\"\n            @keyup.enter.native=\"onSearch\"\n        />\n\n        <el-button type=\"primary\" @click=\"onSearch\">搜索</el-button>\n        <el-button @click=\"onReset\">重置</el-button>\n\n        <el-button\n            v-if=\"isAdmin\"\n            type=\"success\"\n            @click=\"openCreate\"\n        >\n          新增设备\n        </el-button>\n      </div>\n\n      <!-- 表格 -->\n      <el-table\n          :data=\"displayRows\"\n          border\n          v-loading=\"loading\"\n      >\n        <el-table-column prop=\"id\" label=\"ID\" width=\"70\" />\n\n        <!-- 图片（静态映射：public/equipment/*） -->\n        <el-table-column label=\"图片\" width=\"90\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-image\n                :src=\"getEquipmentImage(scope.row)\"\n                fit=\"cover\"\n                style=\"width:56px;height:56px;border-radius:8px;\"\n                :preview-src-list=\"[getEquipmentImage(scope.row)]\"\n            >\n              <div\n                  slot=\"error\"\n                  style=\"width:56px;height:56px;display:flex;align-items:center;justify-content:center;background:#f5f7fa;border-radius:8px;color:#909399;font-size:12px;\"\n              >\n                无图\n              </div>\n            </el-image>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"labName\" label=\"实验室\" />\n        <el-table-column prop=\"category\" label=\"类别\" width=\"140\" />\n        <el-table-column prop=\"name\" label=\"名称\" />\n        <el-table-column prop=\"model\" label=\"型号\" width=\"140\" />\n        <el-table-column prop=\"specification\" label=\"规格\" />\n        <el-table-column prop=\"quantity\" label=\"数量\" width=\"90\" />\n        <el-table-column prop=\"purchaseDate\" label=\"购置日期\" width=\"130\" />\n        <el-table-column prop=\"storageLocation\" label=\"存放位置\" />\n        <el-table-column label=\"状态\" width=\"120\">\n          <template slot-scope=\"scope\">\n            {{ formatStatus(scope.row.status) }}\n          </template>\n        </el-table-column>\n\n\n        <!-- 管理员操作列 -->\n        <el-table-column v-if=\"isAdmin\" label=\"操作\" width=\"200\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"primary\" @click=\"openEdit(scope.row)\">\n              编辑\n            </el-button>\n            <el-button size=\"mini\" type=\"danger\" @click=\"remove(scope.row.id)\">\n              删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <el-pagination\n          style=\"margin-top:16px;\"\n          background\n          layout=\"total, sizes, prev, pager, next\"\n          :total=\"total\"\n          :page-size=\"size\"\n          :page-sizes=\"[10, 20, 50]\"\n          @current-change=\"onPageChange\"\n          @size-change=\"onSizeChange\"\n      />\n    </el-card>\n\n    <!-- 新增/编辑弹窗 -->\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"720px\">\n      <el-form :model=\"form\" label-width=\"110px\">\n\n        <el-form-item label=\"实验室ID\">\n          <el-input v-model=\"form.labId\" />\n        </el-form-item>\n\n        <el-form-item label=\"类别\">\n          <el-select v-model=\"form.category\" placeholder=\"选择类别\" style=\"width: 240px;\">\n            <el-option\n                v-for=\"c in categoryOptions\"\n                :key=\"c\"\n                :label=\"c\"\n                :value=\"c\"\n            />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"form.name\" />\n        </el-form-item>\n\n        <el-form-item label=\"型号\">\n          <el-input v-model=\"form.model\" />\n        </el-form-item>\n\n        <el-form-item label=\"规格\">\n          <el-input v-model=\"form.specification\" />\n        </el-form-item>\n\n        <el-form-item label=\"数量\">\n          <el-input v-model=\"form.quantity\" type=\"number\" />\n        </el-form-item>\n\n        <el-form-item label=\"购置日期\">\n          <el-date-picker\n              v-model=\"form.purchaseDate\"\n              type=\"date\"\n              value-format=\"yyyy-MM-dd\"\n              placeholder=\"选择日期\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"存放位置\">\n          <el-input v-model=\"form.storageLocation\" />\n        </el-form-item>\n\n        <el-form-item label=\"状态\">\n          <el-input v-model=\"form.status\" placeholder=\"例如 AVAILABLE\" />\n        </el-form-item>\n\n        <el-form-item label=\"描述\">\n          <el-input v-model=\"form.description\" type=\"textarea\" :rows=\"2\" />\n        </el-form-item>\n\n      </el-form>\n\n      <span slot=\"footer\">\n        <el-button @click=\"dialogVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submit\">确定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport {\n  listEquipment,\n  createEquipment,\n  updateEquipment,\n  deleteEquipment\n} from \"@/api/equipment\";\n\nexport default {\n  data() {\n    return {\n      loading: false,\n\n      rows: [],\n      total: 0,\n      page: 1,\n      size: 10,\n\n      filters: {\n        category: \"\",\n        keyword: \"\"\n      },\n\n      // 新增你要的类别：实验室器材\n      categoryOptions: [\n        \"显微镜\",\n        \"玻璃器皿\",\n        \"安全器材\",\n        \"化学试剂\",\n        \"电子设备\",\n        \"实验室器材\",\n        \"其他\"\n      ],\n\n      dialogVisible: false,\n      dialogTitle: \"\",\n      isEdit: false,\n      editId: null,\n\n      form: {\n        labId: \"\",\n        category: \"\",\n        name: \"\",\n        model: \"\",\n        specification: \"\",\n        quantity: \"\",\n        purchaseDate: \"\",\n        storageLocation: \"\",\n        status: \"\",\n        description: \"\"\n      }\n    };\n  },\n\n  computed: {\n    role() {\n      return localStorage.getItem(\"Role\") || \"\";\n    },\n    isAdmin() {\n      return this.role === \"ADMIN\";\n    },\n\n    // 前端兜底过滤（后端不支持 keyword/category 也能在当前页筛）\n    displayRows() {\n      const cat = (this.filters.category || \"\").trim();\n      const kw = (this.filters.keyword || \"\").trim().toLowerCase();\n\n      return (this.rows || []).filter(r => {\n        const okCat = !cat || String(r.category || \"\") === cat;\n        if (!kw) return okCat;\n\n        const hay = [\n          r.name,\n          r.model,\n          r.specification,\n          r.description,\n          r.labName,\n          r.category\n        ].map(x => String(x || \"\").toLowerCase()).join(\" \");\n\n        return okCat && hay.includes(kw);\n      });\n    }\n  },\n\n  mounted() {\n    this.load();\n  },\n\n  methods: {\n    // =========================\n    // 图片静态映射（不改后端）\n    // 图片放在：public/equipment/ 下\n    // =========================\n    _img(fileName) {\n      // 处理中文文件名路径\n      return encodeURI(`/equipment/${fileName}`);\n    },\n    getEquipmentImage(row) {\n      const category = String(row?.category || \"\").trim();\n      const name = String(row?.name || \"\").trim();\n\n      // 1) 先按名称关键字（更精准）\n      if (name.includes(\"电子显微镜\")) return this._img(\"电子显微镜.png\");\n      if (name.includes(\"光学显微镜\") || name.includes(\"显微镜\")) return this._img(\"光学显微镜.png\");\n      if (name.includes(\"灭火器\")) return this._img(\"二氧化碳灭火器.png\");\n      if (name.includes(\"烧杯\")) return this._img(\"250ml烧杯.png\");\n      if (name.includes(\"氢化钠\")) return this._img(\"氢化钠.png\");\n\n      // 2) 再按类别（兜底）\n      const map = {\n        \"显微镜\": \"光学显微镜.png\",\n        \"电子设备\": \"电子显微镜.png\",\n        \"玻璃器皿\": \"250ml烧杯.png\",\n        \"安全器材\": \"二氧化碳灭火器.png\",\n        \"化学试剂\": \"氯化钠.png\",\n        \"实验室器材\": \"250ml烧杯.png\"\n      };\n\n      if (map[category]) return this._img(map[category]);\n\n      // 3) 最后兜底：用已有的一张图当默认（你当前目录没有 default.png）\n      return this._img(\"250ml烧杯.png\");\n    },\n\n    async load() {\n      this.loading = true;\n\n      const params = {\n        page: this.page - 1,\n        size: this.size\n      };\n\n      // 如果后端未来支持 category/keyword，这里会自动生效；不支持也不会影响\n      if (this.filters.category) params.category = this.filters.category;\n      if (this.filters.keyword) params.keyword = this.filters.keyword;\n\n      try {\n        const res = await listEquipment(params);\n        const data = res && res.data ? res.data : {};\n\n        this.rows = data.content || [];\n        this.total = Number(data.totalElements || 0);\n\n        // 动态补全类别（你未来扩库不用改前端）\n        const set = new Set(this.categoryOptions);\n        (this.rows || []).forEach(r => {\n          if (r && r.category) set.add(String(r.category));\n        });\n        this.categoryOptions = Array.from(set);\n\n      } catch (e) {\n        const msg = e?.response?.data?.message || e?.message || \"加载失败\";\n        this.$message.error(\"设备列表加载失败：\" + msg);\n        this.rows = [];\n        this.total = 0;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    onSearch() {\n      this.page = 1;\n      this.load();\n    },\n\n    onReset() {\n      this.filters.category = \"\";\n      this.filters.keyword = \"\";\n      this.page = 1;\n      this.load();\n    },\n\n    onPageChange(p) {\n      this.page = p;\n      this.load();\n    },\n\n    onSizeChange(s) {\n      this.size = s;\n      this.page = 1;\n      this.load();\n    },\n\n    openCreate() {\n      this.dialogTitle = \"新增设备\";\n      this.isEdit = false;\n      this.editId = null;\n      this.form = {\n        labId: \"\",\n        category: \"\",\n        name: \"\",\n        model: \"\",\n        specification: \"\",\n        quantity: \"\",\n        purchaseDate: \"\",\n        storageLocation: \"\",\n        status: \"\",\n        description: \"\"\n      };\n      this.dialogVisible = true;\n    },\n    formatStatus(status) {\n      const map = {\n        AVAILABLE: \"可用\",\n        UNAVAILABLE: \"不可用\",\n        IN_USE: \"使用中\",\n        MAINTENANCE: \"维护中\"\n      };\n      return map[status] || status;\n    },\n\n\n    openEdit(row) {\n      this.dialogTitle = \"编辑设备\";\n      this.isEdit = true;\n      this.editId = row.id;\n      this.form = {\n        labId: row.labId,\n        category: row.category,\n        name: row.name,\n        model: row.model,\n        specification: row.specification,\n        quantity: row.quantity,\n        purchaseDate: row.purchaseDate,\n        storageLocation: row.storageLocation,\n        status: row.status,\n        description: row.description\n      };\n      this.dialogVisible = true;\n    },\n\n    async submit() {\n      try {\n        if (this.isEdit) {\n          await updateEquipment(this.editId, this.form);\n          this.$message.success(\"更新成功\");\n        } else {\n          await createEquipment(this.form);\n          this.$message.success(\"创建成功\");\n        }\n\n        this.dialogVisible = false;\n        this.load();\n      } catch (e) {\n        const msg = e?.response?.data?.message || e?.message || \"操作失败\";\n        this.$message.error(msg);\n      }\n    },\n\n    async remove(id) {\n      try {\n        await this.$confirm(\"确定删除该设备？\", \"提示\", { type: \"warning\" });\n        await deleteEquipment(id);\n        this.$message.success(\"删除成功\");\n        this.load();\n      } catch (e) {\n        if (e === \"cancel\") return;\n        const msg = e?.response?.data?.message || e?.message || \"删除失败\";\n        this.$message.error(msg);\n      }\n    }\n  }\n};\n</script>\n"]}]}