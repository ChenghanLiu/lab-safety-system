{"remainingRequest":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/modules/stats/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/modules/stats/index.vue","mtime":1771436502763},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/babel-loader/lib/index.js","mtime":1771254462371},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js","mtime":1771254462450}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7CiAgZ2V0UmVzZXJ2YXRpb25TdGF0cywKICBnZXRFeHBlcmltZW50U3RhdHMsCiAgZ2V0VHJhaW5pbmdPdmVydmlld1N0YXRzLAogIGdldFRyYWluaW5nQ291cnNlU3RhdHMsCiAgZ2V0TGFiT3ZlcnZpZXdTdGF0cywKICBnZXRMYWJTdGF0c0J5TGFiLAogIGdldEluc3BlY3Rpb25PdmVydmlld1N0YXRzLAogIGdldEluc3BlY3Rpb25TdGF0c0J5TGFiCn0gZnJvbSAiQC9hcGkvc3RhdHMiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVUYWI6ICJyZXNlcnZhdGlvbiIsCgogICAgICBsb2FkaW5nOiB7CiAgICAgICAgcmVzZXJ2YXRpb246IGZhbHNlLAogICAgICAgIGV4cGVyaW1lbnQ6IGZhbHNlLAogICAgICAgIHRyYWluaW5nT3ZlcnZpZXc6IGZhbHNlLAogICAgICAgIHRyYWluaW5nQ291cnNlczogZmFsc2UsCiAgICAgICAgbGFiT3ZlcnZpZXc6IGZhbHNlLAogICAgICAgIGxhYkJ5TGFiOiBmYWxzZSwKICAgICAgICBpbnNwZWN0aW9uT3ZlcnZpZXc6IGZhbHNlLAogICAgICAgIGluc3BlY3Rpb25CeUxhYjogZmFsc2UKICAgICAgfSwKCiAgICAgIHJlc2VydmF0aW9uU3RhdHM6IHsgcGVuZGluZzogMCwgYXBwcm92ZWQ6IDAsIHJlamVjdGVkOiAwLCBjYW5jZWxsZWQ6IDAsIHRvdGFsOiAwIH0sCiAgICAgIGV4cGVyaW1lbnRTdGF0czogW10sCgogICAgICB0cmFpbmluZ092ZXJ2aWV3OiB7IHRvdGFsQ291cnNlczogMCwgdG90YWxFbnJvbGxtZW50czogMCwgc3VibWl0dGVkQXR0ZW1wdHM6IDAsIHBhc3NlZEF0dGVtcHRzOiAwLCBwYXNzUmF0ZTogMCB9LAogICAgICB0cmFpbmluZ0NvdXJzZVN0YXRzOiBbXSwKICAgICAgdHJhaW5pbmdQYWdlOiAxLAogICAgICB0cmFpbmluZ1NpemU6IDEwLAogICAgICB0cmFpbmluZ1RvdGFsOiAwLAoKICAgICAgbGFiT3ZlcnZpZXc6IHsKICAgICAgICB0b3RhbExhYnM6IDAsCiAgICAgICAgdG90YWxDYXBhY2l0eTogMCwKICAgICAgICB0b3RhbEVxdWlwbWVudDogMCwKICAgICAgICB0b3RhbFJlc2VydmF0aW9uczogMCwKICAgICAgICBhY3RpdmVSZXNlcnZhdGlvbnM6IDAsCiAgICAgICAgdG90YWxJbnNwZWN0aW9uUGxhbnM6IDAsCiAgICAgICAgdW5zYWZlSW5zcGVjdGlvbkNvdW50OiAwCiAgICAgIH0sCiAgICAgIGxhYlN0YXRzQnlMYWI6IFtdLAogICAgICBsYWJQYWdlOiAxLAogICAgICBsYWJTaXplOiAxMCwKICAgICAgbGFiVG90YWw6IDAsCgogICAgICBpbnNwZWN0aW9uT3ZlcnZpZXc6IHsgdG90YWxQbGFuczogMCwgY29tcGxldGVkUGxhbnM6IDAsIHRvdGFsUmVjb3JkczogMCwgdW5zYWZlQ291bnQ6IDAsIHNhZmVSYXRlOiAwIH0sCiAgICAgIGluc3BlY3Rpb25TdGF0c0J5TGFiOiBbXSwKICAgICAgaW5zcGVjdGlvblBhZ2U6IDEsCiAgICAgIGluc3BlY3Rpb25TaXplOiAxMCwKICAgICAgaW5zcGVjdGlvblRvdGFsOiAwCiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRBbGwoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBsb2FkQWxsKCkgewogICAgICBhd2FpdCBQcm9taXNlLmFsbChbCiAgICAgICAgdGhpcy5sb2FkUmVzZXJ2YXRpb24oKSwKICAgICAgICB0aGlzLmxvYWRFeHBlcmltZW50KCksCiAgICAgICAgdGhpcy5sb2FkVHJhaW5pbmdPdmVydmlldygpLAogICAgICAgIHRoaXMubG9hZFRyYWluaW5nQ291cnNlcygpLAogICAgICAgIHRoaXMubG9hZExhYk92ZXJ2aWV3KCksCiAgICAgICAgdGhpcy5sb2FkTGFiQnlMYWIoKSwKICAgICAgICB0aGlzLmxvYWRJbnNwZWN0aW9uT3ZlcnZpZXcoKSwKICAgICAgICB0aGlzLmxvYWRJbnNwZWN0aW9uQnlMYWIoKQogICAgICBdKTsKICAgIH0sCgogICAgYXN5bmMgbG9hZFJlc2VydmF0aW9uKCkgewogICAgICB0aGlzLmxvYWRpbmcucmVzZXJ2YXRpb24gPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldFJlc2VydmF0aW9uU3RhdHMoKTsKICAgICAgICB0aGlzLnJlc2VydmF0aW9uU3RhdHMgPSByZXMuZGF0YSB8fCB0aGlzLnJlc2VydmF0aW9uU3RhdHM7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLpooTnuqbnu5/orqHliqDovb3lpLHotKUiKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcucmVzZXJ2YXRpb24gPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBsb2FkRXhwZXJpbWVudCgpIHsKICAgICAgdGhpcy5sb2FkaW5nLmV4cGVyaW1lbnQgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEV4cGVyaW1lbnRTdGF0cygpOwogICAgICAgIHRoaXMuZXhwZXJpbWVudFN0YXRzID0gcmVzLmRhdGEgfHwgW107CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlrp7pqozpobnnm67nu5/orqHliqDovb3lpLHotKUiKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcuZXhwZXJpbWVudCA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGxvYWRUcmFpbmluZ092ZXJ2aWV3KCkgewogICAgICB0aGlzLmxvYWRpbmcudHJhaW5pbmdPdmVydmlldyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0VHJhaW5pbmdPdmVydmlld1N0YXRzKCk7CiAgICAgICAgdGhpcy50cmFpbmluZ092ZXJ2aWV3ID0gcmVzLmRhdGEgfHwgdGhpcy50cmFpbmluZ092ZXJ2aWV3OwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Z+56K6t5oC76KeI57uf6K6h5Yqg6L295aSx6LSlIik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nLnRyYWluaW5nT3ZlcnZpZXcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBsb2FkVHJhaW5pbmdDb3Vyc2VzKCkgewogICAgICB0aGlzLmxvYWRpbmcudHJhaW5pbmdDb3Vyc2VzID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRUcmFpbmluZ0NvdXJzZVN0YXRzKHsKICAgICAgICAgIHBhZ2U6IHRoaXMudHJhaW5pbmdQYWdlIC0gMSwKICAgICAgICAgIHNpemU6IHRoaXMudHJhaW5pbmdTaXplCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhIHx8IHt9OwogICAgICAgIHRoaXMudHJhaW5pbmdDb3Vyc2VTdGF0cyA9IGRhdGEuY29udGVudCB8fCBbXTsKICAgICAgICB0aGlzLnRyYWluaW5nVG90YWwgPSBOdW1iZXIoZGF0YS50b3RhbEVsZW1lbnRzIHx8IDApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Z+56K6t6K++56iL57uf6K6h5Yqg6L295aSx6LSlIik7CiAgICAgICAgdGhpcy50cmFpbmluZ0NvdXJzZVN0YXRzID0gW107CiAgICAgICAgdGhpcy50cmFpbmluZ1RvdGFsID0gMDsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcudHJhaW5pbmdDb3Vyc2VzID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgY2hhbmdlVHJhaW5pbmdQYWdlKHApIHsKICAgICAgdGhpcy50cmFpbmluZ1BhZ2UgPSBwOwogICAgICB0aGlzLmxvYWRUcmFpbmluZ0NvdXJzZXMoKTsKICAgIH0sCgogICAgY2hhbmdlVHJhaW5pbmdTaXplKHMpIHsKICAgICAgdGhpcy50cmFpbmluZ1NpemUgPSBzOwogICAgICB0aGlzLnRyYWluaW5nUGFnZSA9IDE7CiAgICAgIHRoaXMubG9hZFRyYWluaW5nQ291cnNlcygpOwogICAgfSwKCiAgICBhc3luYyBsb2FkTGFiT3ZlcnZpZXcoKSB7CiAgICAgIHRoaXMubG9hZGluZy5sYWJPdmVydmlldyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0TGFiT3ZlcnZpZXdTdGF0cygpOwogICAgICAgIHRoaXMubGFiT3ZlcnZpZXcgPSByZXMuZGF0YSB8fCB0aGlzLmxhYk92ZXJ2aWV3OwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5a6e6aqM5a6k5oC76KeI57uf6K6h5Yqg6L295aSx6LSlIik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nLmxhYk92ZXJ2aWV3ID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgbG9hZExhYkJ5TGFiKCkgewogICAgICB0aGlzLmxvYWRpbmcubGFiQnlMYWIgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldExhYlN0YXRzQnlMYWIoewogICAgICAgICAgcGFnZTogdGhpcy5sYWJQYWdlIC0gMSwKICAgICAgICAgIHNpemU6IHRoaXMubGFiU2l6ZQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YSB8fCB7fTsKICAgICAgICB0aGlzLmxhYlN0YXRzQnlMYWIgPSBkYXRhLmNvbnRlbnQgfHwgW107CiAgICAgICAgdGhpcy5sYWJUb3RhbCA9IE51bWJlcihkYXRhLnRvdGFsRWxlbWVudHMgfHwgMCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlrp7pqozlrqTliIblrp7pqozlrqTnu5/orqHliqDovb3lpLHotKUiKTsKICAgICAgICB0aGlzLmxhYlN0YXRzQnlMYWIgPSBbXTsKICAgICAgICB0aGlzLmxhYlRvdGFsID0gMDsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcubGFiQnlMYWIgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBjaGFuZ2VMYWJQYWdlKHApIHsKICAgICAgdGhpcy5sYWJQYWdlID0gcDsKICAgICAgdGhpcy5sb2FkTGFiQnlMYWIoKTsKICAgIH0sCgogICAgY2hhbmdlTGFiU2l6ZShzKSB7CiAgICAgIHRoaXMubGFiU2l6ZSA9IHM7CiAgICAgIHRoaXMubGFiUGFnZSA9IDE7CiAgICAgIHRoaXMubG9hZExhYkJ5TGFiKCk7CiAgICB9LAoKICAgIGFzeW5jIGxvYWRJbnNwZWN0aW9uT3ZlcnZpZXcoKSB7CiAgICAgIHRoaXMubG9hZGluZy5pbnNwZWN0aW9uT3ZlcnZpZXcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEluc3BlY3Rpb25PdmVydmlld1N0YXRzKCk7CiAgICAgICAgdGhpcy5pbnNwZWN0aW9uT3ZlcnZpZXcgPSByZXMuZGF0YSB8fCB0aGlzLmluc3BlY3Rpb25PdmVydmlldzsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuajgOafpeaAu+iniOe7n+iuoeWKoOi9veWksei0pSIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZy5pbnNwZWN0aW9uT3ZlcnZpZXcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBsb2FkSW5zcGVjdGlvbkJ5TGFiKCkgewogICAgICB0aGlzLmxvYWRpbmcuaW5zcGVjdGlvbkJ5TGFiID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRJbnNwZWN0aW9uU3RhdHNCeUxhYih7CiAgICAgICAgICBwYWdlOiB0aGlzLmluc3BlY3Rpb25QYWdlIC0gMSwKICAgICAgICAgIHNpemU6IHRoaXMuaW5zcGVjdGlvblNpemUKICAgICAgICB9KTsKICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEgfHwge307CiAgICAgICAgdGhpcy5pbnNwZWN0aW9uU3RhdHNCeUxhYiA9IGRhdGEuY29udGVudCB8fCBbXTsKICAgICAgICB0aGlzLmluc3BlY3Rpb25Ub3RhbCA9IE51bWJlcihkYXRhLnRvdGFsRWxlbWVudHMgfHwgMCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmo4Dmn6XliIblrp7pqozlrqTnu5/orqHliqDovb3lpLHotKUiKTsKICAgICAgICB0aGlzLmluc3BlY3Rpb25TdGF0c0J5TGFiID0gW107CiAgICAgICAgdGhpcy5pbnNwZWN0aW9uVG90YWwgPSAwOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZy5pbnNwZWN0aW9uQnlMYWIgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBjaGFuZ2VJbnNwZWN0aW9uUGFnZShwKSB7CiAgICAgIHRoaXMuaW5zcGVjdGlvblBhZ2UgPSBwOwogICAgICB0aGlzLmxvYWRJbnNwZWN0aW9uQnlMYWIoKTsKICAgIH0sCgogICAgY2hhbmdlSW5zcGVjdGlvblNpemUocykgewogICAgICB0aGlzLmluc3BlY3Rpb25TaXplID0gczsKICAgICAgdGhpcy5pbnNwZWN0aW9uUGFnZSA9IDE7CiAgICAgIHRoaXMubG9hZEluc3BlY3Rpb25CeUxhYigpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/modules/stats","sourcesContent":["<template>\n  <div>\n    <el-card>\n\n      <div style=\"margin-bottom:16px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;\">\n        <el-button type=\"primary\" @click=\"loadAll\">刷新全部</el-button>\n      </div>\n\n      <el-tabs v-model=\"activeTab\">\n\n        <!-- Reservation -->\n        <el-tab-pane label=\"预约统计\" name=\"reservation\">\n          <el-descriptions :column=\"3\" border v-loading=\"loading.reservation\">\n            <el-descriptions-item label=\"待审核\">{{ reservationStats.pending }}</el-descriptions-item>\n            <el-descriptions-item label=\"已获批\">{{ reservationStats.approved }}</el-descriptions-item>\n            <el-descriptions-item label=\"已拒绝\">{{ reservationStats.rejected }}</el-descriptions-item>\n            <el-descriptions-item label=\"已取消\">{{ reservationStats.cancelled }}</el-descriptions-item>\n            <el-descriptions-item label=\"总共\">{{ reservationStats.total }}</el-descriptions-item>\n          </el-descriptions>\n        </el-tab-pane>\n\n        <!-- Experiment -->\n        <el-tab-pane label=\"实验项目统计\" name=\"experiment\">\n          <el-table :data=\"experimentStats\" border v-loading=\"loading.experiment\">\n            <el-table-column prop=\"experimentProjectId\" label=\"项目ID\" width=\"120\" />\n            <el-table-column prop=\"experimentProjectName\" label=\"项目名称\" />\n            <el-table-column prop=\"reservationCount\" label=\"预约数\" width=\"120\" />\n          </el-table>\n        </el-tab-pane>\n\n        <!-- Training -->\n        <el-tab-pane label=\"培训统计\" name=\"training\">\n          <el-descriptions :column=\"3\" border v-loading=\"loading.trainingOverview\" style=\"margin-bottom:12px;\">\n            <el-descriptions-item label=\"总课程\">{{ trainingOverview.totalCourses }}</el-descriptions-item>\n            <el-descriptions-item label=\"总报名\">{{ trainingOverview.totalEnrollments }}</el-descriptions-item>\n            <el-descriptions-item label=\"已提交\">{{ trainingOverview.submittedAttempts }}</el-descriptions-item>\n            <el-descriptions-item label=\"通过\">{{ trainingOverview.passedAttempts }}</el-descriptions-item>\n            <el-descriptions-item label=\"通过率\">{{ trainingOverview.passRate }}</el-descriptions-item>\n          </el-descriptions>\n\n          <el-table :data=\"trainingCourseStats\" border v-loading=\"loading.trainingCourses\">\n            <el-table-column prop=\"courseId\" label=\"课程ID\" width=\"120\" />\n            <el-table-column prop=\"courseTitle\" label=\"课程标题\" />\n            <el-table-column prop=\"submittedAttempts\" label=\"已提交\" width=\"120\" />\n            <el-table-column prop=\"passedAttempts\" label=\"通过\" width=\"120\" />\n            <el-table-column prop=\"passRate\" label=\"通过率\" width=\"120\" />\n          </el-table>\n\n          <el-pagination\n              style=\"margin-top:16px;\"\n              background\n              layout=\"total, sizes, prev, pager, next\"\n              :total=\"trainingTotal\"\n              :page-size=\"trainingSize\"\n              :page-sizes=\"[10, 20, 50]\"\n              @current-change=\"changeTrainingPage\"\n              @size-change=\"changeTrainingSize\"\n          />\n        </el-tab-pane>\n\n        <!-- Lab -->\n        <el-tab-pane label=\"实验室统计\" name=\"lab\">\n          <el-descriptions :column=\"3\" border v-loading=\"loading.labOverview\" style=\"margin-bottom:12px;\">\n            <el-descriptions-item label=\"实验室总数\">{{ labOverview.totalLabs }}</el-descriptions-item>\n            <el-descriptions-item label=\"总容量\">{{ labOverview.totalCapacity }}</el-descriptions-item>\n            <el-descriptions-item label=\"设备总数\">{{ labOverview.totalEquipment }}</el-descriptions-item>\n            <el-descriptions-item label=\"预约总数\">{{ labOverview.totalReservations }}</el-descriptions-item>\n            <el-descriptions-item label=\"活跃预约\">{{ labOverview.activeReservations }}</el-descriptions-item>\n            <el-descriptions-item label=\"检查计划\">{{ labOverview.totalInspectionPlans }}</el-descriptions-item>\n            <el-descriptions-item label=\"不安全次数\">{{ labOverview.unsafeInspectionCount }}</el-descriptions-item>\n          </el-descriptions>\n\n          <el-table :data=\"labStatsByLab\" border v-loading=\"loading.labByLab\">\n            <el-table-column prop=\"labId\" label=\"实验室ID\" width=\"120\" />\n            <el-table-column prop=\"labName\" label=\"实验室名称\" />\n            <el-table-column prop=\"capacity\" label=\"容量\" width=\"100\" />\n            <el-table-column prop=\"equipmentCount\" label=\"设备数\" width=\"110\" />\n            <el-table-column prop=\"totalReservations\" label=\"总预约\" width=\"110\" />\n            <el-table-column prop=\"activeReservations\" label=\"活跃预约\" width=\"110\" />\n            <el-table-column prop=\"inspectionPlans\" label=\"检查计划\" width=\"110\" />\n            <el-table-column prop=\"unsafeInspections\" label=\"不安全\" width=\"110\" />\n          </el-table>\n\n          <el-pagination\n              style=\"margin-top:16px;\"\n              background\n              layout=\"total, sizes, prev, pager, next\"\n              :total=\"labTotal\"\n              :page-size=\"labSize\"\n              :page-sizes=\"[10, 20, 50]\"\n              @current-change=\"changeLabPage\"\n              @size-change=\"changeLabSize\"\n          />\n        </el-tab-pane>\n\n        <!-- Inspection -->\n        <el-tab-pane label=\"检查统计\" name=\"inspection\">\n          <el-descriptions :column=\"3\" border v-loading=\"loading.inspectionOverview\" style=\"margin-bottom:12px;\">\n            <el-descriptions-item label=\"计划总数\">{{ inspectionOverview.totalPlans }}</el-descriptions-item>\n            <el-descriptions-item label=\"完成计划\">{{ inspectionOverview.completedPlans }}</el-descriptions-item>\n            <el-descriptions-item label=\"记录总数\">{{ inspectionOverview.totalRecords }}</el-descriptions-item>\n            <el-descriptions-item label=\"不安全\">{{ inspectionOverview.unsafeCount }}</el-descriptions-item>\n            <el-descriptions-item label=\"安全率\">{{ inspectionOverview.safeRate }}</el-descriptions-item>\n          </el-descriptions>\n\n          <el-table :data=\"inspectionStatsByLab\" border v-loading=\"loading.inspectionByLab\">\n            <el-table-column prop=\"labId\" label=\"实验室ID\" width=\"120\" />\n            <el-table-column prop=\"labName\" label=\"实验室名称\" />\n            <el-table-column prop=\"totalPlans\" label=\"计划总数\" width=\"110\" />\n            <el-table-column prop=\"completedPlans\" label=\"完成计划\" width=\"110\" />\n            <el-table-column prop=\"totalRecords\" label=\"记录总数\" width=\"110\" />\n            <el-table-column prop=\"unsafeCount\" label=\"不安全\" width=\"110\" />\n            <el-table-column prop=\"safeRate\" label=\"安全率\" width=\"110\" />\n          </el-table>\n\n          <el-pagination\n              style=\"margin-top:16px;\"\n              background\n              layout=\"total, sizes, prev, pager, next\"\n              :total=\"inspectionTotal\"\n              :page-size=\"inspectionSize\"\n              :page-sizes=\"[10, 20, 50]\"\n              @current-change=\"changeInspectionPage\"\n              @size-change=\"changeInspectionSize\"\n          />\n        </el-tab-pane>\n\n      </el-tabs>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {\n  getReservationStats,\n  getExperimentStats,\n  getTrainingOverviewStats,\n  getTrainingCourseStats,\n  getLabOverviewStats,\n  getLabStatsByLab,\n  getInspectionOverviewStats,\n  getInspectionStatsByLab\n} from \"@/api/stats\";\n\nexport default {\n  data() {\n    return {\n      activeTab: \"reservation\",\n\n      loading: {\n        reservation: false,\n        experiment: false,\n        trainingOverview: false,\n        trainingCourses: false,\n        labOverview: false,\n        labByLab: false,\n        inspectionOverview: false,\n        inspectionByLab: false\n      },\n\n      reservationStats: { pending: 0, approved: 0, rejected: 0, cancelled: 0, total: 0 },\n      experimentStats: [],\n\n      trainingOverview: { totalCourses: 0, totalEnrollments: 0, submittedAttempts: 0, passedAttempts: 0, passRate: 0 },\n      trainingCourseStats: [],\n      trainingPage: 1,\n      trainingSize: 10,\n      trainingTotal: 0,\n\n      labOverview: {\n        totalLabs: 0,\n        totalCapacity: 0,\n        totalEquipment: 0,\n        totalReservations: 0,\n        activeReservations: 0,\n        totalInspectionPlans: 0,\n        unsafeInspectionCount: 0\n      },\n      labStatsByLab: [],\n      labPage: 1,\n      labSize: 10,\n      labTotal: 0,\n\n      inspectionOverview: { totalPlans: 0, completedPlans: 0, totalRecords: 0, unsafeCount: 0, safeRate: 0 },\n      inspectionStatsByLab: [],\n      inspectionPage: 1,\n      inspectionSize: 10,\n      inspectionTotal: 0\n    };\n  },\n\n  mounted() {\n    this.loadAll();\n  },\n\n  methods: {\n    async loadAll() {\n      await Promise.all([\n        this.loadReservation(),\n        this.loadExperiment(),\n        this.loadTrainingOverview(),\n        this.loadTrainingCourses(),\n        this.loadLabOverview(),\n        this.loadLabByLab(),\n        this.loadInspectionOverview(),\n        this.loadInspectionByLab()\n      ]);\n    },\n\n    async loadReservation() {\n      this.loading.reservation = true;\n      try {\n        const res = await getReservationStats();\n        this.reservationStats = res.data || this.reservationStats;\n      } catch (e) {\n        this.$message.error(\"预约统计加载失败\");\n      } finally {\n        this.loading.reservation = false;\n      }\n    },\n\n    async loadExperiment() {\n      this.loading.experiment = true;\n      try {\n        const res = await getExperimentStats();\n        this.experimentStats = res.data || [];\n      } catch (e) {\n        this.$message.error(\"实验项目统计加载失败\");\n      } finally {\n        this.loading.experiment = false;\n      }\n    },\n\n    async loadTrainingOverview() {\n      this.loading.trainingOverview = true;\n      try {\n        const res = await getTrainingOverviewStats();\n        this.trainingOverview = res.data || this.trainingOverview;\n      } catch (e) {\n        this.$message.error(\"培训总览统计加载失败\");\n      } finally {\n        this.loading.trainingOverview = false;\n      }\n    },\n\n    async loadTrainingCourses() {\n      this.loading.trainingCourses = true;\n      try {\n        const res = await getTrainingCourseStats({\n          page: this.trainingPage - 1,\n          size: this.trainingSize\n        });\n        const data = res.data || {};\n        this.trainingCourseStats = data.content || [];\n        this.trainingTotal = Number(data.totalElements || 0);\n      } catch (e) {\n        this.$message.error(\"培训课程统计加载失败\");\n        this.trainingCourseStats = [];\n        this.trainingTotal = 0;\n      } finally {\n        this.loading.trainingCourses = false;\n      }\n    },\n\n    changeTrainingPage(p) {\n      this.trainingPage = p;\n      this.loadTrainingCourses();\n    },\n\n    changeTrainingSize(s) {\n      this.trainingSize = s;\n      this.trainingPage = 1;\n      this.loadTrainingCourses();\n    },\n\n    async loadLabOverview() {\n      this.loading.labOverview = true;\n      try {\n        const res = await getLabOverviewStats();\n        this.labOverview = res.data || this.labOverview;\n      } catch (e) {\n        this.$message.error(\"实验室总览统计加载失败\");\n      } finally {\n        this.loading.labOverview = false;\n      }\n    },\n\n    async loadLabByLab() {\n      this.loading.labByLab = true;\n      try {\n        const res = await getLabStatsByLab({\n          page: this.labPage - 1,\n          size: this.labSize\n        });\n        const data = res.data || {};\n        this.labStatsByLab = data.content || [];\n        this.labTotal = Number(data.totalElements || 0);\n      } catch (e) {\n        this.$message.error(\"实验室分实验室统计加载失败\");\n        this.labStatsByLab = [];\n        this.labTotal = 0;\n      } finally {\n        this.loading.labByLab = false;\n      }\n    },\n\n    changeLabPage(p) {\n      this.labPage = p;\n      this.loadLabByLab();\n    },\n\n    changeLabSize(s) {\n      this.labSize = s;\n      this.labPage = 1;\n      this.loadLabByLab();\n    },\n\n    async loadInspectionOverview() {\n      this.loading.inspectionOverview = true;\n      try {\n        const res = await getInspectionOverviewStats();\n        this.inspectionOverview = res.data || this.inspectionOverview;\n      } catch (e) {\n        this.$message.error(\"检查总览统计加载失败\");\n      } finally {\n        this.loading.inspectionOverview = false;\n      }\n    },\n\n    async loadInspectionByLab() {\n      this.loading.inspectionByLab = true;\n      try {\n        const res = await getInspectionStatsByLab({\n          page: this.inspectionPage - 1,\n          size: this.inspectionSize\n        });\n        const data = res.data || {};\n        this.inspectionStatsByLab = data.content || [];\n        this.inspectionTotal = Number(data.totalElements || 0);\n      } catch (e) {\n        this.$message.error(\"检查分实验室统计加载失败\");\n        this.inspectionStatsByLab = [];\n        this.inspectionTotal = 0;\n      } finally {\n        this.loading.inspectionByLab = false;\n      }\n    },\n\n    changeInspectionPage(p) {\n      this.inspectionPage = p;\n      this.loadInspectionByLab();\n    },\n\n    changeInspectionSize(s) {\n      this.inspectionSize = s;\n      this.inspectionPage = 1;\n      this.loadInspectionByLab();\n    }\n  }\n};\n</script>\n"]}]}