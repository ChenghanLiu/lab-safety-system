{"remainingRequest":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/modules/experiment/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/src/views/modules/experiment/list.vue","mtime":1771426779695},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/babel-loader/lib/index.js","mtime":1771254462371},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/cache-loader/dist/cjs.js","mtime":1771254462036},{"path":"/Users/liuchenghan/Desktop/lab-safety-system/front/admin/node_modules/vue-loader/lib/index.js","mtime":1771254462450}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7CiAgbGlzdEV4cGVyaW1lbnRQcm9qZWN0cywKICBnZXRFeHBlcmltZW50UHJvamVjdEJ5SWQsCiAgY3JlYXRlRXhwZXJpbWVudFByb2plY3QsCiAgdXBkYXRlRXhwZXJpbWVudFByb2plY3QsCiAgZGVsZXRlRXhwZXJpbWVudFByb2plY3QsCiAgcmVzZXJ2ZUV4cGVyaW1lbnRQcm9qZWN0LAogIGdldEV4cGVyaW1lbnRTdGF0aXN0aWNzCn0gZnJvbSAiQC9hcGkvZXhwZXJpbWVudCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIHBhZ2U6IDEsCiAgICAgIHNpemU6IDEwLAoKICAgICAgZmlsdGVyczogewogICAgICAgIGtleXdvcmQ6ICIiLAogICAgICAgIGxhYklkOiAiIgogICAgICB9LAoKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ1RpdGxlOiAiIiwKICAgICAgaXNFZGl0OiBmYWxzZSwKICAgICAgZWRpdElkOiBudWxsLAogICAgICBmb3JtOiB7CiAgICAgICAgbGFiSWQ6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIG9iamVjdGl2ZTogIiIsCiAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgcmVxdWlyZW1lbnRzOiAiIiwKICAgICAgICBzdGFydFRpbWU6ICIiLAogICAgICAgIGVuZFRpbWU6ICIiCiAgICAgIH0sCgogICAgICBkZXRhaWxWaXNpYmxlOiBmYWxzZSwKICAgICAgZGV0YWlsTG9hZGluZzogZmFsc2UsCiAgICAgIGRldGFpbDoge30sCgogICAgICByZXNlcnZlVmlzaWJsZTogZmFsc2UsCiAgICAgIHJlc2VydmVFeHBlcmltZW50SWQ6IG51bGwsCiAgICAgIHJlc2VydmVGb3JtOiB7CiAgICAgICAgZXhwZXJpbWVudE5hbWU6ICIiLAogICAgICAgIGxhYklkOiAiIiwKICAgICAgICBlcXVpcG1lbnRJZDogIiIsCiAgICAgICAgc3RhcnRUaW1lOiAiIiwKICAgICAgICBlbmRUaW1lOiAiIiwKICAgICAgICBwdXJwb3NlOiAiIiwKICAgICAgICByZW1hcms6ICIiCiAgICAgIH0sCgogICAgICBzdGF0c1Zpc2libGU6IGZhbHNlLAogICAgICBzdGF0c0xvYWRpbmc6IGZhbHNlLAogICAgICBzdGF0c0xpc3Q6IFtdCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICByb2xlKCkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIlJvbGUiKSB8fCAiIjsKICAgIH0sCiAgICBpc1N0dWRlbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvbGUgPT09ICJTVFVERU5UIjsKICAgIH0sCiAgICBpc1RlYWNoZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvbGUgPT09ICJURUFDSEVSIjsKICAgIH0sCiAgICBpc0FkbWluKCkgewogICAgICByZXR1cm4gdGhpcy5yb2xlID09PSAiQURNSU4iOwogICAgfSwKICAgIGNhbk1hbmFnZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNUZWFjaGVyIHx8IHRoaXMuaXNBZG1pbjsKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgbG9hZCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2UgLSAxLAogICAgICAgICAgc2l6ZTogdGhpcy5zaXplLAogICAgICAgICAgc29ydDogInN0YXJ0VGltZSxkZXNjIgogICAgICAgIH07CgogICAgICAgIGlmICh0aGlzLmZpbHRlcnMua2V5d29yZCkgcGFyYW1zLmtleXdvcmQgPSB0aGlzLmZpbHRlcnMua2V5d29yZDsKICAgICAgICBpZiAodGhpcy5maWx0ZXJzLmxhYklkKSBwYXJhbXMubGFiSWQgPSB0aGlzLmZpbHRlcnMubGFiSWQ7CgogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGxpc3RFeHBlcmltZW50UHJvamVjdHMocGFyYW1zKTsKICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YS5jb250ZW50IHx8IFtdOwogICAgICAgIHRoaXMudG90YWwgPSBOdW1iZXIocmVzLmRhdGEudG90YWxFbGVtZW50cyB8fCAwKTsKCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zdCBtc2cgPSBlPy5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlPy5tZXNzYWdlIHx8ICLliqDovb3lpLHotKUiOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWKoOi9veWunumqjOmhueebruWksei0pe+8miIgKyBtc2cpOwogICAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmZpbHRlcnMua2V5d29yZCA9ICIiOwogICAgICB0aGlzLmZpbHRlcnMubGFiSWQgPSAiIjsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIGNoYW5nZVBhZ2UocCkgewogICAgICB0aGlzLnBhZ2UgPSBwOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgY2hhbmdlU2l6ZShzKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHM7CiAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKCiAgICBvcGVuQ3JlYXRlKCkgewogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gIuaWsOW7uuWunumqjOmhueebriI7CiAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuZWRpdElkID0gbnVsbDsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIGxhYklkOiAiIiwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBvYmplY3RpdmU6ICIiLAogICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgIHJlcXVpcmVtZW50czogIiIsCiAgICAgICAgc3RhcnRUaW1lOiAiIiwKICAgICAgICBlbmRUaW1lOiAiIgogICAgICB9OwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKCiAgICBvcGVuRWRpdChyb3cpIHsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLnvJbovpHlrp7pqozpobnnm64iOwogICAgICB0aGlzLmlzRWRpdCA9IHRydWU7CiAgICAgIHRoaXMuZWRpdElkID0gcm93LmlkOwogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgbGFiSWQ6IHJvdy5sYWJJZCwKICAgICAgICBuYW1lOiByb3cubmFtZSwKICAgICAgICBvYmplY3RpdmU6IHJvdy5vYmplY3RpdmUsCiAgICAgICAgY29udGVudDogcm93LmNvbnRlbnQsCiAgICAgICAgcmVxdWlyZW1lbnRzOiByb3cucmVxdWlyZW1lbnRzLAogICAgICAgIHN0YXJ0VGltZTogcm93LnN0YXJ0VGltZSwKICAgICAgICBlbmRUaW1lOiByb3cuZW5kVGltZQogICAgICB9OwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKCiAgICBhc3luYyBzdWJtaXQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7CiAgICAgICAgICBhd2FpdCB1cGRhdGVFeHBlcmltZW50UHJvamVjdCh0aGlzLmVkaXRJZCwgdGhpcy5mb3JtKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5pu05paw5oiQ5YqfIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IGNyZWF0ZUV4cGVyaW1lbnRQcm9qZWN0KHRoaXMuZm9ybSk7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIm+W7uuaIkOWKnyIpOwogICAgICAgIH0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnN0IG1zZyA9IGU/LnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8IGU/Lm1lc3NhZ2UgfHwgIuaTjeS9nOWksei0pSI7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihtc2cpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIHJlbW92ZShpZCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IGRlbGV0ZUV4cGVyaW1lbnRQcm9qZWN0KGlkKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgIHRoaXMubG9hZCgpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc3Qgc3RhdHVzID0gZT8ucmVzcG9uc2U/LnN0YXR1czsKICAgICAgICBjb25zdCBtc2cgPSBlPy5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlPy5tZXNzYWdlIHx8ICLliKDpmaTlpLHotKUiOwogICAgICAgIC8vIOWQjuerr+WmguaenOayoeWunueOsCBERUxFVEXvvIzkvJrmmK8gNDA1LzQwNAogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWIoOmZpOWksei0pSgke3N0YXR1cyB8fCAiLSJ9Ke+8miR7bXNnfWApOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIHZpZXdEZXRhaWwoaWQpIHsKICAgICAgdGhpcy5kZXRhaWxWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5kZXRhaWxMb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRFeHBlcmltZW50UHJvamVjdEJ5SWQoaWQpOwogICAgICAgIHRoaXMuZGV0YWlsID0gcmVzLmRhdGEgfHwge307CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLliqDovb3or6bmg4XlpLHotKUiKTsKICAgICAgICB0aGlzLmRldGFpbCA9IHt9OwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuZGV0YWlsTG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIG9wZW5SZXNlcnZlKHJvdykgewogICAgICB0aGlzLnJlc2VydmVFeHBlcmltZW50SWQgPSByb3cuaWQ7CiAgICAgIHRoaXMucmVzZXJ2ZUZvcm0gPSB7CiAgICAgICAgZXhwZXJpbWVudE5hbWU6IHJvdy5uYW1lLAogICAgICAgIGxhYklkOiByb3cubGFiSWQgfHwgIiIsCiAgICAgICAgZXF1aXBtZW50SWQ6ICIiLAogICAgICAgIHN0YXJ0VGltZTogcm93LnN0YXJ0VGltZSB8fCAiIiwKICAgICAgICBlbmRUaW1lOiByb3cuZW5kVGltZSB8fCAiIiwKICAgICAgICBwdXJwb3NlOiAiQ291cnNlIGV4cGVyaW1lbnQiLAogICAgICAgIHJlbWFyazogIiIKICAgICAgfTsKICAgICAgdGhpcy5yZXNlcnZlVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIGFzeW5jIHN1Ym1pdFJlc2VydmUoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgbGFiSWQ6IHRoaXMucmVzZXJ2ZUZvcm0ubGFiSWQsCiAgICAgICAgICBlcXVpcG1lbnRJZDogdGhpcy5yZXNlcnZlRm9ybS5lcXVpcG1lbnRJZCwKICAgICAgICAgIHN0YXJ0VGltZTogdGhpcy5yZXNlcnZlRm9ybS5zdGFydFRpbWUsCiAgICAgICAgICBlbmRUaW1lOiB0aGlzLnJlc2VydmVGb3JtLmVuZFRpbWUsCiAgICAgICAgICBwdXJwb3NlOiB0aGlzLnJlc2VydmVGb3JtLnB1cnBvc2UsCiAgICAgICAgICByZW1hcms6IHRoaXMucmVzZXJ2ZUZvcm0ucmVtYXJrCiAgICAgICAgfTsKICAgICAgICBhd2FpdCByZXNlcnZlRXhwZXJpbWVudFByb2plY3QodGhpcy5yZXNlcnZlRXhwZXJpbWVudElkLCBwYXJhbXMpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi6aKE57qm5bey5o+Q5LqkIik7CiAgICAgICAgdGhpcy5yZXNlcnZlVmlzaWJsZSA9IGZhbHNlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc3QgbXNnID0gZT8ucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgfHwgZT8ubWVzc2FnZSB8fCAi6aKE57qm5aSx6LSlIjsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKG1zZyk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgb3BlblN0YXRpc3RpY3MoKSB7CiAgICAgIHRoaXMuc3RhdHNWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zdGF0c0xvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEV4cGVyaW1lbnRTdGF0aXN0aWNzKCk7CiAgICAgICAgdGhpcy5zdGF0c0xpc3QgPSByZXMuZGF0YSB8fCBbXTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnN0IG1zZyA9IGU/LnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8IGU/Lm1lc3NhZ2UgfHwgIuiOt+WPlue7n+iuoeWksei0pSI7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihtc2cpOwogICAgICAgIHRoaXMuc3RhdHNMaXN0ID0gW107CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5zdGF0c0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AA4OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/modules/experiment","sourcesContent":["<template>\n  <div>\n    <el-card>\n\n      <!-- 搜索栏 -->\n      <div style=\"margin-bottom:16px; display:flex; gap:10px; flex-wrap:wrap;\">\n        <el-input\n            v-model=\"filters.keyword\"\n            placeholder=\"关键词 keyword\"\n            style=\"width:220px;\"\n            clearable\n            @keyup.enter.native=\"search\"\n        />\n        <el-input\n            v-model=\"filters.labId\"\n            placeholder=\"实验室ID labId\"\n            style=\"width:180px;\"\n            clearable\n            @keyup.enter.native=\"search\"\n        />\n\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\n        <el-button @click=\"reset\">重置</el-button>\n\n        <el-button\n            v-if=\"canManage\"\n            type=\"success\"\n            @click=\"openCreate\"\n        >\n          新建实验项目\n        </el-button>\n\n        <el-button\n            v-if=\"isAdmin\"\n            @click=\"openStatistics\"\n        >\n          统计（Admin）\n        </el-button>\n      </div>\n\n      <!-- 表格 -->\n      <el-table :data=\"list\" border v-loading=\"loading\">\n\n        <el-table-column prop=\"id\" label=\"ID\" width=\"70\" />\n        <el-table-column prop=\"labName\" label=\"实验室\" />\n        <el-table-column prop=\"name\" label=\"项目名称\" />\n        <el-table-column prop=\"startTime\" label=\"开始时间\" width=\"180\" />\n        <el-table-column prop=\"endTime\" label=\"结束时间\" width=\"180\" />\n        <el-table-column prop=\"createdAt\" label=\"创建时间\" width=\"180\" />\n\n        <el-table-column label=\"操作\" width=\"260\">\n          <template slot-scope=\"scope\">\n\n            <el-button size=\"mini\" @click=\"viewDetail(scope.row.id)\">\n              查看\n            </el-button>\n\n            <!-- student reserve -->\n            <el-button\n                v-if=\"isStudent\"\n                size=\"mini\"\n                type=\"primary\"\n                @click=\"openReserve(scope.row)\"\n            >\n              预约\n            </el-button>\n\n            <!-- teacher/admin manage -->\n            <el-button\n                v-if=\"canManage\"\n                size=\"mini\"\n                type=\"success\"\n                @click=\"openEdit(scope.row)\"\n            >\n              编辑\n            </el-button>\n\n            <el-button\n                v-if=\"canManage\"\n                size=\"mini\"\n                type=\"danger\"\n                @click=\"remove(scope.row.id)\"\n            >\n              删除\n            </el-button>\n\n          </template>\n        </el-table-column>\n\n      </el-table>\n\n      <!-- 分页 -->\n      <el-pagination\n          style=\"margin-top:16px;\"\n          background\n          layout=\"total, prev, pager, next, sizes\"\n          :total=\"total\"\n          :page-size=\"size\"\n          :page-sizes=\"[10, 20, 50]\"\n          @current-change=\"changePage\"\n          @size-change=\"changeSize\"\n      />\n    </el-card>\n\n    <!-- 新建/编辑弹窗 -->\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"700px\">\n      <el-form :model=\"form\" label-width=\"110px\">\n\n        <el-form-item label=\"实验室ID\">\n          <el-input v-model=\"form.labId\" />\n        </el-form-item>\n\n        <el-form-item label=\"项目名称\">\n          <el-input v-model=\"form.name\" />\n        </el-form-item>\n\n        <el-form-item label=\"实验目的\">\n          <el-input type=\"textarea\" :rows=\"2\" v-model=\"form.objective\" />\n        </el-form-item>\n\n        <el-form-item label=\"实验内容\">\n          <el-input type=\"textarea\" :rows=\"2\" v-model=\"form.content\" />\n        </el-form-item>\n\n        <el-form-item label=\"实验要求\">\n          <el-input type=\"textarea\" :rows=\"2\" v-model=\"form.requirements\" />\n        </el-form-item>\n\n        <el-form-item label=\"开始时间\">\n          <el-date-picker\n              v-model=\"form.startTime\"\n              type=\"datetime\"\n              value-format=\"yyyy-MM-ddTHH:mm:ss\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"结束时间\">\n          <el-date-picker\n              v-model=\"form.endTime\"\n              type=\"datetime\"\n              value-format=\"yyyy-MM-ddTHH:mm:ss\"\n          />\n        </el-form-item>\n\n      </el-form>\n\n      <span slot=\"footer\">\n        <el-button @click=\"dialogVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submit\">确定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 详情弹窗 -->\n    <el-dialog title=\"实验项目详情\" :visible.sync=\"detailVisible\" width=\"700px\">\n      <el-descriptions :column=\"1\" border v-loading=\"detailLoading\">\n        <el-descriptions-item label=\"ID\">{{ detail.id }}</el-descriptions-item>\n        <el-descriptions-item label=\"实验室\">{{ detail.labName }}</el-descriptions-item>\n        <el-descriptions-item label=\"名称\">{{ detail.name }}</el-descriptions-item>\n        <el-descriptions-item label=\"目的\">{{ detail.objective }}</el-descriptions-item>\n        <el-descriptions-item label=\"内容\">{{ detail.content }}</el-descriptions-item>\n        <el-descriptions-item label=\"要求\">{{ detail.requirements }}</el-descriptions-item>\n        <el-descriptions-item label=\"开始时间\">{{ detail.startTime }}</el-descriptions-item>\n        <el-descriptions-item label=\"结束时间\">{{ detail.endTime }}</el-descriptions-item>\n        <el-descriptions-item label=\"创建时间\">{{ detail.createdAt }}</el-descriptions-item>\n      </el-descriptions>\n\n      <span slot=\"footer\">\n        <el-button @click=\"detailVisible=false\">关闭</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 学生预约弹窗 -->\n    <el-dialog title=\"预约实验项目\" :visible.sync=\"reserveVisible\" width=\"700px\">\n      <el-form :model=\"reserveForm\" label-width=\"110px\">\n\n        <el-form-item label=\"实验项目\">\n          <el-input v-model=\"reserveForm.experimentName\" disabled />\n        </el-form-item>\n\n        <el-form-item label=\"实验室ID\">\n          <el-input v-model=\"reserveForm.labId\" />\n        </el-form-item>\n\n        <el-form-item label=\"设备ID\">\n          <el-input v-model=\"reserveForm.equipmentId\" />\n        </el-form-item>\n\n        <el-form-item label=\"开始时间\">\n          <el-date-picker\n              v-model=\"reserveForm.startTime\"\n              type=\"datetime\"\n              value-format=\"yyyy-MM-ddTHH:mm:ss\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"结束时间\">\n          <el-date-picker\n              v-model=\"reserveForm.endTime\"\n              type=\"datetime\"\n              value-format=\"yyyy-MM-ddTHH:mm:ss\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"用途\">\n          <el-input v-model=\"reserveForm.purpose\" />\n        </el-form-item>\n\n        <el-form-item label=\"备注\">\n          <el-input v-model=\"reserveForm.remark\" />\n        </el-form-item>\n\n      </el-form>\n\n      <span slot=\"footer\">\n        <el-button @click=\"reserveVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitReserve\">提交预约</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 统计弹窗 -->\n    <el-dialog title=\"实验项目统计（Admin）\" :visible.sync=\"statsVisible\" width=\"700px\">\n      <el-table :data=\"statsList\" border v-loading=\"statsLoading\">\n        <el-table-column prop=\"experimentProjectId\" label=\"ID\" width=\"90\" />\n        <el-table-column prop=\"experimentProjectName\" label=\"项目名称\" />\n        <el-table-column prop=\"reservationCount\" label=\"预约数\" width=\"120\" />\n      </el-table>\n\n      <span slot=\"footer\">\n        <el-button @click=\"statsVisible=false\">关闭</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport {\n  listExperimentProjects,\n  getExperimentProjectById,\n  createExperimentProject,\n  updateExperimentProject,\n  deleteExperimentProject,\n  reserveExperimentProject,\n  getExperimentStatistics\n} from \"@/api/experiment\";\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      list: [],\n      total: 0,\n      page: 1,\n      size: 10,\n\n      filters: {\n        keyword: \"\",\n        labId: \"\"\n      },\n\n      dialogVisible: false,\n      dialogTitle: \"\",\n      isEdit: false,\n      editId: null,\n      form: {\n        labId: \"\",\n        name: \"\",\n        objective: \"\",\n        content: \"\",\n        requirements: \"\",\n        startTime: \"\",\n        endTime: \"\"\n      },\n\n      detailVisible: false,\n      detailLoading: false,\n      detail: {},\n\n      reserveVisible: false,\n      reserveExperimentId: null,\n      reserveForm: {\n        experimentName: \"\",\n        labId: \"\",\n        equipmentId: \"\",\n        startTime: \"\",\n        endTime: \"\",\n        purpose: \"\",\n        remark: \"\"\n      },\n\n      statsVisible: false,\n      statsLoading: false,\n      statsList: []\n    };\n  },\n\n  computed: {\n    role() {\n      return localStorage.getItem(\"Role\") || \"\";\n    },\n    isStudent() {\n      return this.role === \"STUDENT\";\n    },\n    isTeacher() {\n      return this.role === \"TEACHER\";\n    },\n    isAdmin() {\n      return this.role === \"ADMIN\";\n    },\n    canManage() {\n      return this.isTeacher || this.isAdmin;\n    }\n  },\n\n  mounted() {\n    this.load();\n  },\n\n  methods: {\n    async load() {\n      this.loading = true;\n      try {\n        const params = {\n          page: this.page - 1,\n          size: this.size,\n          sort: \"startTime,desc\"\n        };\n\n        if (this.filters.keyword) params.keyword = this.filters.keyword;\n        if (this.filters.labId) params.labId = this.filters.labId;\n\n        const res = await listExperimentProjects(params);\n        this.list = res.data.content || [];\n        this.total = Number(res.data.totalElements || 0);\n\n      } catch (e) {\n        const msg = e?.response?.data?.message || e?.message || \"加载失败\";\n        this.$message.error(\"加载实验项目失败：\" + msg);\n        this.list = [];\n        this.total = 0;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    search() {\n      this.page = 1;\n      this.load();\n    },\n\n    reset() {\n      this.filters.keyword = \"\";\n      this.filters.labId = \"\";\n      this.page = 1;\n      this.load();\n    },\n\n    changePage(p) {\n      this.page = p;\n      this.load();\n    },\n\n    changeSize(s) {\n      this.size = s;\n      this.page = 1;\n      this.load();\n    },\n\n    openCreate() {\n      this.dialogTitle = \"新建实验项目\";\n      this.isEdit = false;\n      this.editId = null;\n      this.form = {\n        labId: \"\",\n        name: \"\",\n        objective: \"\",\n        content: \"\",\n        requirements: \"\",\n        startTime: \"\",\n        endTime: \"\"\n      };\n      this.dialogVisible = true;\n    },\n\n    openEdit(row) {\n      this.dialogTitle = \"编辑实验项目\";\n      this.isEdit = true;\n      this.editId = row.id;\n      this.form = {\n        labId: row.labId,\n        name: row.name,\n        objective: row.objective,\n        content: row.content,\n        requirements: row.requirements,\n        startTime: row.startTime,\n        endTime: row.endTime\n      };\n      this.dialogVisible = true;\n    },\n\n    async submit() {\n      try {\n        if (this.isEdit) {\n          await updateExperimentProject(this.editId, this.form);\n          this.$message.success(\"更新成功\");\n        } else {\n          await createExperimentProject(this.form);\n          this.$message.success(\"创建成功\");\n        }\n        this.dialogVisible = false;\n        this.load();\n      } catch (e) {\n        const msg = e?.response?.data?.message || e?.message || \"操作失败\";\n        this.$message.error(msg);\n      }\n    },\n\n    async remove(id) {\n      try {\n        await deleteExperimentProject(id);\n        this.$message.success(\"删除成功\");\n        this.load();\n      } catch (e) {\n        const status = e?.response?.status;\n        const msg = e?.response?.data?.message || e?.message || \"删除失败\";\n        // 后端如果没实现 DELETE，会是 405/404\n        this.$message.error(`删除失败(${status || \"-\"})：${msg}`);\n      }\n    },\n\n    async viewDetail(id) {\n      this.detailVisible = true;\n      this.detailLoading = true;\n      try {\n        const res = await getExperimentProjectById(id);\n        this.detail = res.data || {};\n      } catch (e) {\n        this.$message.error(\"加载详情失败\");\n        this.detail = {};\n      } finally {\n        this.detailLoading = false;\n      }\n    },\n\n    openReserve(row) {\n      this.reserveExperimentId = row.id;\n      this.reserveForm = {\n        experimentName: row.name,\n        labId: row.labId || \"\",\n        equipmentId: \"\",\n        startTime: row.startTime || \"\",\n        endTime: row.endTime || \"\",\n        purpose: \"Course experiment\",\n        remark: \"\"\n      };\n      this.reserveVisible = true;\n    },\n\n    async submitReserve() {\n      try {\n        const params = {\n          labId: this.reserveForm.labId,\n          equipmentId: this.reserveForm.equipmentId,\n          startTime: this.reserveForm.startTime,\n          endTime: this.reserveForm.endTime,\n          purpose: this.reserveForm.purpose,\n          remark: this.reserveForm.remark\n        };\n        await reserveExperimentProject(this.reserveExperimentId, params);\n        this.$message.success(\"预约已提交\");\n        this.reserveVisible = false;\n      } catch (e) {\n        const msg = e?.response?.data?.message || e?.message || \"预约失败\";\n        this.$message.error(msg);\n      }\n    },\n\n    async openStatistics() {\n      this.statsVisible = true;\n      this.statsLoading = true;\n      try {\n        const res = await getExperimentStatistics();\n        this.statsList = res.data || [];\n      } catch (e) {\n        const msg = e?.response?.data?.message || e?.message || \"获取统计失败\";\n        this.$message.error(msg);\n        this.statsList = [];\n      } finally {\n        this.statsLoading = false;\n      }\n    }\n  }\n};\n</script>\n"]}]}